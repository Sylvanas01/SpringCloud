<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hand.hiot.infra.mapper.CustomerMapper">

<select id="getCustomers" resultType="com.hand.hiot.domain.entity.Customer" parameterType="com.hand.hiot.domain.entity.Customer">
    SELECT customer_id,
    customer_number,
    customer_name
    FROM hiot_customer_25160 WHERE enabled_flag=1 and company_id=#{companyId}

    <if test="customerNumber != '' and customerNumber != null">
        AND CUSTOMER_NUMBER LIKE concat('%',#{customerNumber},'%')
    </if>

    <if test="customerName != '' and customerName != null">
        AND CUSTOMER_NAME LIKE concat('%',#{customerName},'%')
    </if>

</select>

    <insert id="addCustomer"  parameterType="com.hand.hiot.domain.entity.Customer">
        INSERT INTO hiot_customer_25160
        (`customer_number`,`customer_name`,`company_id`)
        VALUES
        (#{customerNumber},#{customerName},#{companyId});
    </insert>

    <select id="getIdByNumber" resultType="java.lang.Long"
            parameterType="com.hand.hiot.domain.entity.Customer">

   SELECT customer_id
    FROM hiot_customer_25160 WHERE customer_number = #{customerNumber};

    </select>

    <select id="getNameById" resultType="java.lang.String"
            parameterType="com.hand.hiot.domain.entity.Customer">

   SELECT customer_name
    FROM hiot_customer_25160 WHERE customer_id = #{customerId};

    </select>
</mapper>